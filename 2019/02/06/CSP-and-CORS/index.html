<!DOCTYPE html>
<html lang=En>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="CSPCSP (Content Security Policy) is a policy set by the developer by a HTTP header or meta tag in the HTML and enforced by browsers so resources cannot be loaded from not approved sources. So CSP defe">
<meta name="keywords" content="Security,CORS,CSP">
<meta property="og:type" content="article">
<meta property="og:title" content="CSP and CORS">
<meta property="og:url" content="http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/index.html">
<meta property="og:site_name" content="notes.txt">
<meta property="og:description" content="CSPCSP (Content Security Policy) is a policy set by the developer by a HTTP header or meta tag in the HTML and enforced by browsers so resources cannot be loaded from not approved sources. So CSP defe">
<meta property="og:locale" content="English">
<meta property="og:updated_time" content="2019-02-05T22:45:10.698Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CSP and CORS">
<meta name="twitter:description" content="CSPCSP (Content Security Policy) is a policy set by the developer by a HTTP header or meta tag in the HTML and enforced by browsers so resources cannot be loaded from not approved sources. So CSP defe">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>CSP and CORS</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/peterforgacs">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a id="previous-post" class="icon" href="/2019/03/02/How-caching-works-on-the-web/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a id="next-post" class="icon" href="/2018/10/24/Tools-to-get-familiar-with-a-new-codebase/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&text=CSP and CORS"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&title=CSP and CORS"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&is_video=false&description=CSP and CORS"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=CSP and CORS&body=Check out this article: http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&title=CSP and CORS"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&title=CSP and CORS"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&title=CSP and CORS"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&title=CSP and CORS"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&name=CSP and CORS&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CSP"><span class="toc-number">1.</span> <span class="toc-text">CSP</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Adding-CSP-trough-meta-tag"><span class="toc-number">2.</span> <span class="toc-text">Adding CSP trough meta tag</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Syntax"><span class="toc-number">2.1.</span> <span class="toc-text">Syntax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Interesting-CSP-directives"><span class="toc-number">2.2.</span> <span class="toc-text">Interesting CSP directives</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Changing-the-CSP"><span class="toc-number">2.3.</span> <span class="toc-text">Changing the CSP</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CORS"><span class="toc-number">3.</span> <span class="toc-text">CORS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Typical-CORS-problems"><span class="toc-number">3.1.</span> <span class="toc-text">Typical CORS problems</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Adding-CORS-headers"><span class="toc-number">3.2.</span> <span class="toc-text">Adding CORS headers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bypassing-CORS"><span class="toc-number">3.3.</span> <span class="toc-text">Bypassing CORS</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        CSP and CORS
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Peter Forgacs</span>
      </span>
      
    <div class="postdate">
        <time datetime="2019-02-05T23:43:00.000Z" itemprop="datePublished">2019-02-05</time>
        <span class="readTime"></span>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/CORS/">CORS</a>, <a class="tag-link" href="/tags/CSP/">CSP</a>, <a class="tag-link" href="/tags/Security/">Security</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="CSP"><a href="#CSP" class="headerlink" title="CSP"></a>CSP</h1><p>CSP (Content Security Policy) is a policy set by the developer by a HTTP header or meta tag in the HTML and enforced by browsers so resources cannot be loaded from not approved sources.</p>
<p>So CSP <strong>defends the client</strong> so it wont load resources from unknown sources.</p>
<blockquote>
<p>Besides reducing XSS vulnerabilites a strict CSP can even give you a heads up about some package that you have installed and is doing network requests to some unknown place.</p>
</blockquote>
<h1 id="Adding-CSP-trough-meta-tag"><a href="#Adding-CSP-trough-meta-tag" class="headerlink" title="Adding CSP trough meta tag"></a>Adding CSP trough meta tag</h1><p>The content security policy can be set up on the server or by adding it trough a meta tag.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &apos;self&apos; *.example.com&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>Here the http-equiv attributes simulates HTTP response header.<br>If you need dynamic content security policy a good option is to use webpacks html webpack plugin.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CSP = <span class="string">'Content-Security-Policy'</span>: &#123;</span><br><span class="line">        <span class="string">'http-equiv'</span>: <span class="string">'Content-Security-Policy'</span>,</span><br><span class="line">        <span class="string">'content'</span>:</span><br><span class="line">		<span class="string">'default-src \'self\'; \</span></span><br><span class="line"><span class="string">		script-src \'self\'; \</span></span><br><span class="line"><span class="string">		style-src \'self\' \'unsafe-inline\' blob:; \</span></span><br><span class="line"><span class="string">		img-src \'self\' data: blob:; \</span></span><br><span class="line"><span class="string">		font-src \'self\' data:; \</span></span><br><span class="line"><span class="string">		connect-src \'self\' ws.localhost'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">	filename: <span class="string">'index.html'</span>,</span><br><span class="line">	template: path.resolve(__dirname, <span class="string">'index.html'</span>),</span><br><span class="line">	meta: CSP,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h2><p>Notice keywords like <strong>‘self’</strong> are contained in quotes.<br>Notice each subsection has a <strong>;</strong> character separating except the last one.<br>The full list of available options can be found <a href="https://developers.google.com/web/fundamentals/security/csp/" target="_blank" rel="noopener">here</a> .</p>
<h2 id="Interesting-CSP-directives"><a href="#Interesting-CSP-directives" class="headerlink" title="Interesting CSP directives"></a>Interesting CSP directives</h2><ul>
<li><p>report-uri specifies a URL where a browser will send reports when a content security policy is violated. This directive can’t be used in <meta> tags.  </p>
</li>
<li><p>frame-ancestors directive specifies valid parents that may embed a page</p>
</li>
</ul>
<h2 id="Changing-the-CSP"><a href="#Changing-the-CSP" class="headerlink" title="Changing the CSP"></a>Changing the CSP</h2><p>CSP are great but they are not flawless, some workarounds are possible by browser extensions.<br>One trick is to create listen to the <strong>chrome.webRequest.onHeadersReceived</strong> event and modify the headers. As far as i know this is only possible on google chrome by the extension that has been last installed.</p>
<p>Example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">chrome.webRequest.onHeadersReceived.addListener(</span><br><span class="line">  modifyCspHeaders,</span><br><span class="line">  &#123;</span><br><span class="line">    urls : [ <span class="string">'http://*/*'</span>, <span class="string">'https://*/*'</span> ],</span><br><span class="line">    types: [ <span class="string">'main_frame'</span> ]</span><br><span class="line">  &#125;,</span><br><span class="line">  [ <span class="string">'blocking'</span>, <span class="string">'responseHeaders'</span> ]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>You can find more <a href="https://transitory.technology/browser-extensions-and-csp-headers/" target="_blank" rel="noopener">here</a>.</p>
<h1 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h1><p>CORS (Cross Origin Sharing) is a way to manage the strictness of the <a href="https://www.wikiwand.com/en/Same-origin_policy" target="_blank" rel="noopener">Same origin policy</a>.</p>
<blockquote>
<p>Cors secures clients sessions and provides some level of ddos protection to the servers.</p>
</blockquote>
<p>Before cors you could not do requests to different domains from your site.<br>Cors allows this but comes with a more strict handling of ajax requests on the client side.  </p>
<p>According to the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Preflighted_requests" target="_blank" rel="noopener">documentation</a> browsers differentiate between two type of requests, simple requests and preflighted requests.</p>
<p>In broad terms more sensitive operations / methods and unusualy types ( json ) are preflighted.</p>
<p>Simple requests are done normally, just how you would expect.<br>Preflighted requests first send a HTTP OPTIONS request to the server. This includes the HTTP <strong>ORIGIN</strong> header. The server decides wheter or not this matches its origin policy.  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Server side</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isOriginAllowed</span>(<span class="params">origin, allowedOrigin</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(allowedOrigin)) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; allowedOrigin.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOriginAllowed(origin, allowedOrigin[i])) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isString(allowedOrigin)) &#123;</span><br><span class="line">      <span class="keyword">return</span> origin === allowedOrigin;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (allowedOrigin <span class="keyword">instanceof</span> <span class="built_in">RegExp</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> allowedOrigin.test(origin);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> !!allowedOrigin;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>If its accepted by the server the actual request is done, if not the request fails.<br>The validity of the ORIGIN header and the honoring of the server is done by the browser automatically.<br>Parts of it are enforced trough the fetch api.</p>
<h2 id="Typical-CORS-problems"><a href="#Typical-CORS-problems" class="headerlink" title="Typical CORS problems"></a>Typical CORS problems</h2><p>You just wrote the first fetch call in your sweet new webapp. Its a POST request or to a different port and the ‘No ‘Access-Control-Allow-Origin’ header is present on the requested resource. ‘ error pops up.  This is because you did not set CORS setting on the backend and the browser identified your request as a prefligthed request.</p>
<h2 id="Adding-CORS-headers"><a href="#Adding-CORS-headers" class="headerlink" title="Adding CORS headers"></a>Adding CORS headers</h2><p>Most of the time you only need to enable some middleware to enable it on the server side.<br>For example you can use the popular plugin <a href="https://expressjs.com/en/resources/middleware/cors.html" target="_blank" rel="noopener">express-cors</a>.<br>If you take a look at the <a href="https://github.com/expressjs/cors/blob/master/lib/index.js" target="_blank" rel="noopener">source</a> of the plugin you can see its not magic. It simply checks if the ORIGIN is matching and sets headers accordingly.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">cors</span>(<span class="params">options, req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> headers = [],</span><br><span class="line">      method = req.method &amp;&amp; req.method.toUpperCase &amp;&amp; req.method.toUpperCase();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (method === <span class="string">'OPTIONS'</span>) &#123;</span><br><span class="line">      <span class="comment">// preflight</span></span><br><span class="line">      headers.push(configureOrigin(options, req));</span><br><span class="line">      headers.push(configureCredentials(options, req));</span><br><span class="line">      headers.push(configureMethods(options, req));</span><br><span class="line">      headers.push(configureAllowedHeaders(options, req));</span><br><span class="line">      headers.push(configureMaxAge(options, req));</span><br><span class="line">      headers.push(configureExposedHeaders(options, req));</span><br><span class="line">      applyHeaders(headers, res);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (options.preflightContinue) &#123;</span><br><span class="line">        next();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Safari (and potentially other browsers) need content-length 0,</span></span><br><span class="line">        <span class="comment">//   for 204 or they just hang waiting for a body</span></span><br><span class="line">        res.statusCode = options.optionsSuccessStatus;</span><br><span class="line">        res.setHeader(<span class="string">'Content-Length'</span>, <span class="string">'0'</span>);</span><br><span class="line">        res.end();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// actual response</span></span><br><span class="line">      headers.push(configureOrigin(options, req));</span><br><span class="line">      headers.push(configureCredentials(options, req));</span><br><span class="line">      headers.push(configureExposedHeaders(options, req));</span><br><span class="line">      applyHeaders(headers, res);</span><br><span class="line">      next();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Bypassing-CORS"><a href="#Bypassing-CORS" class="headerlink" title="Bypassing CORS"></a>Bypassing CORS</h2><p>Since CORS are enforced by the browser they can be disabled.<br>The user can disable CORS:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># not a good idea</span></span><br><span class="line">google-chrome --<span class="built_in">disable</span>-web-security</span><br></pre></td></tr></table></figure>
<p>The fetch api has a mode property with ‘no-cors’ but it also limits the possible requests to simple requests.</p>
<p>Additionally you can also put a proxy between you and the server.<br>In this <a href="https://medium.com/netscape/hacking-it-out-when-cors-wont-let-you-be-great-35f6206cc646" target="_blank" rel="noopener">article</a> the writer forked the cors everywhere package so in the proxy request it overwrites the ORIGIN header to something that is accepted by the server then return the response to the page that needs the data.</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/peterforgacs">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CSP"><span class="toc-number">1.</span> <span class="toc-text">CSP</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Adding-CSP-trough-meta-tag"><span class="toc-number">2.</span> <span class="toc-text">Adding CSP trough meta tag</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Syntax"><span class="toc-number">2.1.</span> <span class="toc-text">Syntax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Interesting-CSP-directives"><span class="toc-number">2.2.</span> <span class="toc-text">Interesting CSP directives</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Changing-the-CSP"><span class="toc-number">2.3.</span> <span class="toc-text">Changing the CSP</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CORS"><span class="toc-number">3.</span> <span class="toc-text">CORS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Typical-CORS-problems"><span class="toc-number">3.1.</span> <span class="toc-text">Typical CORS problems</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Adding-CORS-headers"><span class="toc-number">3.2.</span> <span class="toc-text">Adding CORS headers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bypassing-CORS"><span class="toc-number">3.3.</span> <span class="toc-text">Bypassing CORS</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&text=CSP and CORS"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&title=CSP and CORS"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&is_video=false&description=CSP and CORS"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=CSP and CORS&body=Check out this article: http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&title=CSP and CORS"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&title=CSP and CORS"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&title=CSP and CORS"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&title=CSP and CORS"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://peterforgacs.github.io/2019/02/06/CSP-and-CORS/&name=CSP and CORS&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 Peter Forgacs
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/peterforgacs">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-97407927-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'peterforgacs-github-io';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


